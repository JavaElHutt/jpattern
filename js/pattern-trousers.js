
// Secondary measures. In most patterns, they tend to be somewhat random measurements, defined
// by the designers after years of experience and experimentation, which have been defined following
// aesthetic values. How deep should a dart be? In most cases this measure depends on the tailor's experience.
const SecondaryTrousersMeasurements = {
    EASE_10: 10,
    EASE_15: 15,
    EASE_30: 30,
    EASE_35: 35,
    EASE_40: 40,
}

Object.freeze(SecondaryTrousersMeasurements);

class PatternTrousersFront {
    auxiliaryLine_A1_B1;
    auxiliaryLine_B1_D3;
    auxiliaryLineD3END;
    auxiliaryLineENDG1;
    dottedLineC3F1;
    dottedLineD2D3;
    curveLine_E1_D2;
    curveLine_OA1_OB1;
    curveLine_OB1_D3;
    line_D3_F1;
    auxiliaryLine_G1_C2;
    auxiliaryLine_A1_C2;
    line_F1_G1;
    lineE1OA1;
    curveLine_C4_G1;
    line_C4_C3;
    line_C3_D2;
    dottedLine_C2_C4;
    point_OA1;
    point_E1;
    point_F1;
    point_C3;
    point_D1;
    point_C1;
    pointOB1;


    get pointOB1() {
        return this.pointOB1;
    }

    set pointOB1(value) {
        this.pointOB1 = value;
    }

    get pointC1() {
        return this.point_C1;
    }

    set pointC1(value) {
        this.point_C1 = value;
    }

    get pointD1() {
        return this.point_D1;
    }

    set pointD1(value) {
        this.point_D1 = value;
    }

    get pointF1() {
        return this.point_F1;
    }

    set pointF1(value) {
        this.point_F1 = value;
    }

    get pointC3() {
        return this.point_C3;
    }

    set pointC3(value) {
        this.point_C3 = value;
    }

    get pointOA1() {
        return this.point_OA1;
    }

    set pointOA1(value) {
        this.point_OA1 = value;
    }

    get pointE1() {
        return this.point_E1;
    }

    set pointE1(value) {
        this.point_E1 = value;
    }

    get dottedLineC2C4() {
        return this.dottedLine_C2_C4;
    }

    set dottedLineC2C4(value) {
        this.dottedLine_C2_C4 = value;
    }

    get auxiliaryLineENDG1() {
        return this.auxiliaryLineENDG1;
    }

    set auxiliaryLineENDG1(value) {
        this.auxiliaryLineENDG1 = value;
    }

    get auxiliaryLineD3END() {
        return this.auxiliaryLineD3END;
    }

    set auxiliaryLineD3END(value) {
        this.auxiliaryLineD3END = value;
    }

    get dottedLineD2D3() {
        return this.dottedLineD2D3;
    }

    set dottedLineD2D3(value) {
        this.dottedLineD2D3 = value;
    }

    get lineC3D2() {
        return this.line_C3_D2;
    }

    set lineC3D2(value) {
        this.line_C3_D2 = value;
    }

    get lineC4C3() {
        return this.line_C4_C3;
    }

    set lineC4C3(value) {
        this.line_C4_C3 = value;
    }

    get auxiliaryLineB1D3() {
        return this.auxiliaryLine_B1_D3;
    }

    set auxiliaryLineB1D3(value) {
        this.auxiliaryLine_B1_D3 = value;
    }

    get auxiliaryLineG1C2() {
        return this.auxiliaryLine_G1_C2;
    }

    set auxiliaryLineG1C2(value) {
        this.auxiliaryLine_G1_C2 = value;
    }

    get lineF1G1() {
        return this.line_F1_G1;
    }

    set lineF1G1(value) {
        this.line_F1_G1 = value;
    }

    get curveLineC4G1() {
        return this.curveLine_C4_G1;
    }

    set curveLineC4G1(value) {
        this.curveLine_C4_G1 = value;
    }

    get lineE1OA1() {
        return this.lineE1OA1;
    }

    set lineE1OA1(value) {
        this.lineE1OA1 = value;
    }

    get lineD3F1() {
        return this.line_D3_F1;
    }

    set lineD3F1(value) {
        this.line_D3_F1 = value;
    }

    get curveLineOB1D3() {
        return this.curveLine_OB1_D3;
    }

    set curveLineOB1D3(value) {
        this.curveLine_OB1_D3 = value;
    }

    get curveLineOA1OB1() {
        return this.curveLine_OA1_OB1;
    }

    set curveLineOA1OB1(value) {
        this.curveLine_OA1_OB1 = value;
    }

    get curveLineE1D2() {
        return this.curveLine_E1_D2;
    }

    set curveLineE1D2(value) {
        this.curveLine_E1_D2 = value;
    }

    get dottedLineC3F1() {
        return this.dottedLineC3F1;
    }

    set dottedLineC3F1(value) {
        this.dottedLineC3F1 = value;
    }

    get auxiliaryLineA1C2() {
        return this.auxiliaryLine_A1_C2;
    }

    set auxiliaryLineA1C2(value) {
        this.auxiliaryLine_A1_C2 = value;
    }

    get auxiliaryLineA1B1() {
        return this.auxiliaryLine_A1_B1;
    }

    set auxiliaryLineA1B1(value) {
        this.auxiliaryLine_A1_B1 = value;
    }
} // end class PatternTrousersFront

class PatternTrousersBack {
    auxiliaryLine_B2_A2;
    auxiliaryLineA2END;
    auxiliaryLineENDC6;
    auxiliaryLineC6D7;
    auxiliaryLine_D7_B2;
    curveLineOB2OA2;
    lineOA2E2;
    dottedLineD7D5;
    dottedLine_D5_D6;
    curveLineE2D6;
    line_D6_L1;
    line_L1_G2;
    curveLineC7G2;
    lineC7I1;
    point_C7;
    dottedLineC5L1;
    pointC5;
    pointL1;
    lineI1D7;
    point_I1;
    pointX2;
    pointE2;
    curveLineD7OB2;
    pointOB2;
    pointOA2;
    pointC6;
    pointD4;

    get pointD4() {
        return this.pointD4;
    }

    set pointD4(value) {
        this.pointD4 = value;
    }

    get pointC6() {
        return this.pointC6;
    }

    set pointC6(value) {
        this.pointC6 = value;
    }

    get pointOB2() {
        return this.pointOB2;
    }

    set pointOB2(value) {
        this.pointOB2 = value;
    }

    get pointOA2() {
        return this.pointOA2;
    }

    set pointOA2(value) {
        this.pointOA2 = value;
    }

    get pointE2() {
        return this.pointE2;
    }

    set pointE2(value) {
        this.pointE2 = value;
    }

    get pointX2() {
        return this.pointX2;
    }

    set pointX2(value) {
        this.pointX2 = value;
    }

    get pointC5() {
        return this.pointC5;
    }

    set pointC5(value) {
        this.pointC5 = value;
    }

    get pointL1() {
        return this.pointL1;
    }

    set pointL1(value) {
        this.pointL1 = value;
    }

    get lineI1D7() {
        return this.lineI1D7;
    }

    set lineI1D7(value) {
        this.lineI1D7 = value;
    }

    get dottedLineC5L1() {
        return this.dottedLineC5L1;
    }

    set dottedLineC5L1(value) {
        this.dottedLineC5L1 = value;
    }

    get pointC7() {
        return this.point_C7;
    }

    set pointC7(value) {
        this.point_C7 = value;
    }

    get pointI1() {
        return this.point_I1;
    }

    set pointI1(value) {
        this.point_I1 = value;
    }

    get lineC7I1() {
        return this.lineC7I1;
    }

    set lineC7I1(value) {
        this.lineC7I1 = value;
    }

    get curveLineC7G2() {
        return this.curveLineC7G2;
    }

    set curveLineC7G2(value) {
        this.curveLineC7G2 = value;
    }

    get lineL1G2() {
        return this.line_L1_G2;
    }

    set lineL1G2(value) {
        this.line_L1_G2 = value;
    }

    get lineD6L1() {
        return this.line_D6_L1;
    }

    set lineD6L1(value) {
        this.line_D6_L1 = value;
    }

    get dottedLineD5D6() {
        return this.dottedLine_D5_D6;
    }

    set dottedLineD5D6(value) {
        this.dottedLine_D5_D6 = value;
    }

    get auxiliaryLineD7B2() {
        return this.auxiliaryLine_D7_B2;
    }

    set auxiliaryLineD7B2(value) {
        this.auxiliaryLine_D7_B2 = value;
    }

    get dottedLineD7D5() {
        return this.dottedLineD7D5;
    }

    set dottedLineD7D5(value) {
        this.dottedLineD7D5 = value;
    }

    get curveLineE2D6() {
        return this.curveLineE2D6;
    }

    set curveLineE2D6(value) {
        this.curveLineE2D6 = value;
    }

    get lineOA2E2() {
        return this.lineOA2E2;
    }

    set lineOA2E2(value) {
        this.lineOA2E2 = value;
    }

    get curveLineD7OB2() {
        return this.curveLineD7OB2;
    }

    set curveLineD7OB2(value) {
        this.curveLineD7OB2 = value;
    }

    get curveLineOB2OA2() {
        return this.curveLineOB2OA2;
    }

    set curveLineOB2OA2(value) {
        this.curveLineOB2OA2 = value;
    }

    get auxiliaryLineC6D7() {
        return this.auxiliaryLineC6D7;
    }

    set auxiliaryLineC6D7(value) {
        this.auxiliaryLineC6D7 = value;
    }

    get auxiliaryLineENDC6() {
        return this.auxiliaryLineENDC6;
    }

    set auxiliaryLineENDC6(value) {
        this.auxiliaryLineENDC6 = value;
    }

    get auxiliaryLineA2END() {
        return this.auxiliaryLineA2END;
    }

    set auxiliaryLineA2END(value) {
        this.auxiliaryLineA2END = value;
    }

    get auxiliaryLineB2A2() {
        return this.auxiliaryLine_B2_A2;
    }

    set auxiliaryLineB2A2(value) {
        this.auxiliaryLine_B2_A2 = value;
    }
}

class Trousers {
    patternTrousersFront;
    patternTrousersBack;

    constructor(lowHip, waistToHip, legLength, ankleToKnee, heightToHip, inseam,) {
        this.lowHip = lowHip;
        this.waistToHip = waistToHip;
        this.legLength = legLength;
        this.ankleToKnee = ankleToKnee;
        this.inseam = inseam;

        this.rise = heightToHip - inseam;

        this.patternTrousersFront = new PatternTrousersFront();
        this.patternTrousersBack = new PatternTrousersBack();

        this.createFrontPattern();
        this.createBackPattern();
    }

    static get SECONDARY_MEASUREMENTS() {
        return SecondaryTrousersMeasurements;
    }

    createFrontPattern() {
        const pointA1 = new Point(100, 50);

        // Point pointB1 --> 1/4 Hip Contour
        const auxiliaryLineA1B1 = new Line(pointA1, this.lowHip / 4);
        const pointB1 = auxiliaryLineA1B1.getEndPoint();

        // Point pointC2
        const auxiliaryLineA1C2 = new Line(pointA1, this.legLength, 270); // 270 es un ángulo de 90 grados, hacia abajo
        const pointC2 = auxiliaryLineA1C2.getEndPoint();

        // Point pointC1 --> Knee Line
        const lineA1C1 = new Line(pointA1, this.legLength - this.ankleToKnee, 270);
        const pointC1 = lineA1C1.getEndPoint();
        pointC1.setLabel('C1', 'tr');

        // Point pointD1 (Old rise line)
        const lineA1D1 = new Line(pointA1, this.rise, 270);
        const pointD1 = lineA1D1.getEndPoint();
        pointD1.setLabel('D1', 'tr');


        // Point pointD2
        const distD1D2 = (this.lowHip / 16) - Trousers.SECONDARY_MEASUREMENTS.EASE_15;
        const lineD1D2 = new Line(pointD1, distD1D2, 180);
        const pointD2 = lineD1D2.getEndPoint();


        // Point pointE1
        const lineA1E1 = new Line(pointA1, this.waistToHip, 270);
        const pointE1 = lineA1E1.getEndPoint();
        pointE1.setLabel('E1', 'r');

        // Point pointOA1 (Front Origin)
        const lineOneBelow = new Line(pointA1, Trousers.SECONDARY_MEASUREMENTS.EASE_10, 270);
        let pointAux = lineOneBelow.getEndPoint();
        const lineOneRight = new Line(pointAux, Trousers.SECONDARY_MEASUREMENTS.EASE_10);
        const pointOA1 = lineOneRight.getEndPoint();
        pointOA1.setLabel('OA1', 'tr');
        // Point pointOB1
        const lineB1OB2 = new Line(pointB1, Trousers.SECONDARY_MEASUREMENTS.EASE_30, 180);
        const pointOB1 = lineB1OB2.getEndPoint();
        pointOB1.setLabel('OB1', 'tr');

        // Point pointC3
        const distC1C3 = distD1D2 / 2;
        const lineC1C3 = new Line(pointC1, distC1C3, 180);
        const pointC3 = lineC1C3.getEndPoint();

        // Point pointC4
        const lineC2C4 = new Line(pointC2, distC1C3, 180);
        const pointC4 = lineC2C4.getEndPoint();

        // Point pointF1
        const distC1F1 = this.lowHip / 4 - distD1D2;
        const lineC1F1 = new Line(pointC1, distC1F1);
        const pointF1 = lineC1F1.getEndPoint();

        // Línea de la rodilla
        const dottedLineC3F1 = new Line(pointC3, pointF1);
        
        // Point pointG1
        const lineC2G1 = new Line(pointC2, distC1F1);
        const pointG1 = lineC2G1.getEndPoint();

        // Curve E1D2
        const lineE1D2 = new Line(pointE1, pointD2);
        const offsetLineE1D2 = lineE1D2.getLength() / 10;
        const curveLineE1D2 = new CurveLine(pointE1, pointD2, -offsetLineE1D2);

        // Curve OA1OB1
        const curveLineOA1OB1 = new CurveLine(pointOA1, pointOB1, -5);

        // Curve OB1D3
        const lineB1D3 = new Line(pointB1, lineA1D1.getLength(), 270);
        const pointD3 = lineB1D3.getEndPoint();
        const lineOB1D3 = new Line(pointOB1, pointD3);
        const offsetLineOB1D3 = lineOB1D3.getLength() / 30;
        const curveLineOB1D3 = new CurveLine(pointOB1, pointD3, offsetLineOB1D3);


        // Curve C4G1
        const lineC4G1 = new Line(pointC4, pointG1);
        const offsetLineC4G1 = lineC4G1.getLength() / 25;
        const curveLineC4G1 = new CurveLine(pointC4, pointG1, offsetLineC4G1);

        const auxiliaryLineD3END = new Line(pointB1, this.legLength, 270);

        /***** After performing the calculations, we add the calculated elements to the back pattern. *****/
        this.patternTrousersFront.auxiliaryLineA1C2 = auxiliaryLineA1C2;
        this.patternTrousersFront.auxiliaryLineB1D3 = new Line(pointB1, pointD3);
        this.patternTrousersFront.auxiliaryLineD3END = auxiliaryLineD3END;
        this.patternTrousersFront.auxiliaryLineA1B1 = auxiliaryLineA1B1;
        this.patternTrousersFront.dottedLineC3F1 = dottedLineC3F1;
        this.patternTrousersFront.dottedLineD2D3 = new Line(pointD2, pointD3);
        this.patternTrousersFront.curveLineOA1OB1 = curveLineOA1OB1;
        this.patternTrousersFront.curveLineE1D2 = curveLineE1D2;
        this.patternTrousersFront.curveLineOB1D3 = curveLineOB1D3;
        this.patternTrousersFront.lineD3F1 = new Line(pointD3, pointF1);
        this.patternTrousersFront.auxiliaryLineG1C2 = new Line(pointG1, pointC2);
        this.patternTrousersFront.auxiliaryLineENDG1 = new Line(auxiliaryLineD3END.getEndPoint(), pointG1);
        this.patternTrousersFront.lineF1G1 = new Line(pointF1, pointG1);
        this.patternTrousersFront.curveLineC4G1 = curveLineC4G1;
        this.patternTrousersFront.lineE1OA1 = new Line(pointE1, pointOA1);
        this.patternTrousersFront.lineC4C3 = new Line(pointC4, pointC3);
        this.patternTrousersFront.lineC3D2 = new Line(pointC3, pointD2);
        this.patternTrousersFront.dottedLineC2C4 = new Line(pointC2, pointC4);
        this.patternTrousersFront.pointOA1 = pointOA1;
        this.patternTrousersFront.pointE1 = pointE1;
        this.patternTrousersFront.pointF1 = pointF1;
        this.patternTrousersFront.pointC3 = pointC3;
        this.patternTrousersFront.pointD1 = pointD1;
        this.patternTrousersFront.pointC1 = pointC1;
        this.patternTrousersFront.pointOB1 = pointOB1;
    }

    createBackPattern() {
        const pointB1 = this.patternTrousersFront.auxiliaryLineA1B1.getEndPoint();
        const pointB2 = new Point(pointB1.x + 150, pointB1.y);

        // Point pointA2
        const distB2A2 = (this.lowHip / 4) + Trousers.SECONDARY_MEASUREMENTS.EASE_40;
        const lineB2A2 = new Line(pointB2, distB2A2);
        const pointA2 = lineB2A2.getEndPoint();

        // Point pointE2
        const lineA2E2 = new Line(pointA2, this.waistToHip, 270);
        const pointE2 = lineA2E2.getEndPoint();
        pointE2.setLabel('E2', 'r');

        // Point pointD4
        const lineA2D4 = new Line(pointA2, this.rise, 270);
        const pointD4 = lineA2D4.getEndPoint();
        pointD4.setLabel('D4', 'tl');

        // Point pointC5
        const lineB2C5 = new Line(pointB2, this.legLength - this.ankleToKnee, 270);
        const pointC5 = lineB2C5.getEndPoint();
        pointC5.setLabel('C5', 'l');

        // Draw the auxiliary vertical line starting from A2
        const auxiliaryLineA2END = new Line(pointA2, this.legLength, 270);

        // Point pointD5
        const distD4D5 = (this.lowHip / 16) + Trousers.SECONDARY_MEASUREMENTS.EASE_30;
        const lineD4D5 = new Line(pointD4, distD4D5);
        const pointD5 = lineD4D5.getEndPoint();

        // Point pointD6
        const lineD5D6 = new Line(pointD5, Trousers.SECONDARY_MEASUREMENTS.EASE_10, 270);
        const pointD6 = lineD5D6.getEndPoint();

        // Point pointOB2
        const lineB2OB2 = new Line(pointB2, Trousers.SECONDARY_MEASUREMENTS.EASE_30);
        const pointOB2 = lineB2OB2.getEndPoint();
        pointOB2.setLabel('OB2', 'tr');

        // Point pointOA2
        let lineAux = new Line(pointA2, Trousers.SECONDARY_MEASUREMENTS.EASE_35, 180);
        let pointAux = lineAux.getEndPoint();
        lineAux = new Line(pointAux, Trousers.SECONDARY_MEASUREMENTS.EASE_15, 90);
        const pointOA2 = lineAux.getEndPoint();
        pointOA2.setLabel('OA2', 'tr');

        // Point pointD7
        const lineB2D7 = new Line(pointB2, this.rise, 270);
        const pointD7 = lineB2D7.getEndPoint();

        const lineD7D5 = new Line(pointD7, pointD5);

        // Leg width calculation
        const distD1D2 = (this.lowHip / 16) - Trousers.SECONDARY_MEASUREMENTS.EASE_15;
        const distC1F1 = this.lowHip / 4 - distD1D2;
        const distC1C3 = distD1D2 / 2;
        const widthHalfLeg = (distC1C3 + distC1F1 + Trousers.SECONDARY_MEASUREMENTS.EASE_40) / 2;
        const pointX2 = new Line(pointC5, lineD7D5.getLength() / 2).getEndPoint();
        pointX2.setLabel('X2', 'b');
        const pointI1 = new Line(pointX2, widthHalfLeg, 180).getEndPoint();
        pointI1.setLabel('I1', 'bl');
        const pointL1 = new Line(pointX2, widthHalfLeg).getEndPoint();
        pointL1.setLabel('L1', 'r');
        const pointC6 = new Line(pointB2, this.legLength, 270).getEndPoint();
        pointC6.setLabel('C6', 'b');
        const pointC7 = new Line(pointC6, distD4D5).getEndPoint();
        pointC7.setLabel('C7', 'b');

        const distC5L1 = new Line(pointC5, pointL1).getLength();
        const pointG2 = new Line(pointC6, distC5L1).getEndPoint();

        // Curve lines
        const lineOB2OA2 = new Line(pointOB2, pointOA2);
        const offsetLineOB2OA2 = lineOB2OA2.getLength() / 50;

        const lineD7OB2 = new Line(pointD7, pointOB2);
        const offsetLineD7OB2 = lineD7OB2.getLength() / 30;

        const lineE2D6 = new Line(pointE2, pointD6); 
        const offsetLineE2D6 = lineE2D6.getLength() / 5;

        const lineC7G2 = new Line(pointC7, pointG2);
        const offsetLineC7G2 = lineC7G2.getLength() / 25;

        this.patternTrousersBack.auxiliaryLineB2A2 = new Line(pointB2, pointA2);
        this.patternTrousersBack.auxiliaryLineA2END = auxiliaryLineA2END;
        this.patternTrousersBack.auxiliaryLineENDC6 = new Line(auxiliaryLineA2END.getEndPoint(), pointC6);
        this.patternTrousersBack.auxiliaryLineC6D7 = new Line(pointC6, pointD7);
        this.patternTrousersBack.auxiliaryLineD7B2 = new Line(pointD7, pointB2);
        this.patternTrousersBack.curveLineOB2OA2 = new CurveLine(pointOB2, pointOA2, offsetLineOB2OA2);
        this.patternTrousersBack.lineOA2E2 = new Line(pointOA2, pointE2);
        this.patternTrousersBack.dottedLineD7D5 = new Line(pointD7, pointD5);
        this.patternTrousersBack.dottedLineD5D6 = new Line(pointD5, pointD6);
        this.patternTrousersBack.curveLineE2D6 = new CurveLine(pointE2, pointD6, -offsetLineE2D6);
        this.patternTrousersBack.lineD6L1 = new Line(pointD6, pointL1);
        this.patternTrousersBack.lineL1G2 = new Line(pointL1, pointG2);
        this.patternTrousersBack.curveLineC7G2 = new CurveLine(pointC7, pointG2, -offsetLineC7G2);
        this.patternTrousersBack.lineC7I1 = new Line(pointC7, pointI1);
        this.patternTrousersBack.pointC7 = pointC7;
        this.patternTrousersBack.pointI1 = pointI1;
        this.patternTrousersBack.dottedLineC5L1 = new Line(pointC5, pointL1);
        this.patternTrousersBack.pointC5 = pointC5;
        this.patternTrousersBack.pointL1 = pointL1;
        this.patternTrousersBack.lineI1D7 = new Line(pointI1, pointD7);
        this.patternTrousersBack.curveLineD7OB2 = new CurveLine(pointD7, pointOB2, offsetLineD7OB2);
        this.patternTrousersBack.pointX2 = pointX2;
        this.patternTrousersBack.pointE2 = pointE2;
        this.patternTrousersBack.pointOB2 = pointOB2;
        this.patternTrousersBack.pointOA2 = pointOA2;
        this.patternTrousersBack.pointC6 = pointC6;
        this.patternTrousersBack.pointD4 = pointD4;
    }

    get patternTrousersFront() {
        return this.patternTrousersFront;
    }

    get patternTrousersBack() {
        return this.patternTrousersBack;
    }

    getDrawableObjects() {
        return [this.patternTrousersFront, this.patternTrousersBack];
    }

}